{"id":"skillMatrix-21q","title":"Task: User Database Operations","description":"Create Server Actions for user CRUD operations: create, read, update, and status management.\nThese operations will be used by the user management UI and the auth system.","acceptance_criteria":"```gherkin\nGiven I call createUser with valid data\nWhen the operation completes\nThen a new user exists in the database with hashed password\nAnd an audit log entry is created\nAnd the returned user object does NOT include the passwordHash\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.276089998+08:00","updated_at":"2026-01-04T14:49:02.276089998+08:00","dependencies":[{"issue_id":"skillMatrix-21q","depends_on_id":"skillMatrix-f7c","type":"blocks","created_at":"2026-01-04T14:49:59.132379492+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-21q","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:03.320768633+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-6bu","title":"Task: Public Badge Viewer Page","description":"Create the public page that displays an employee's skills when their badge is scanned.\nNo authentication required - accessible by anyone with the QR code URL.","acceptance_criteria":"```gherkin\nGiven an employee with badgeToken \"qR7xK9mN...\"\nWhen I navigate to /b/qR7xK9mN...\nThen I see the employee's name, photo, and skills\nAnd I do NOT see any edit buttons or admin links\n\nGiven a badgeToken that doesn't exist\nWhen I navigate to /b/invalid123\nThen I see a 404 page\n\nGiven an employee who is terminated\nWhen I navigate to their badge URL\nThen I see \"This badge is no longer valid\"\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.305851268+08:00","updated_at":"2026-01-04T14:49:02.305851268+08:00","dependencies":[{"issue_id":"skillMatrix-6bu","depends_on_id":"skillMatrix-7jw","type":"blocks","created_at":"2026-01-04T14:50:45.229818329+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-6bu","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:44.449621474+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-77x","title":"Task: Login Page UI","description":"Create the login page with email/password form, error handling, and proper UX.\nThis is the entry point for all authenticated users.","acceptance_criteria":"```gherkin\nGiven I navigate to /login\nWhen I enter valid credentials and submit\nThen I am redirected to /admin\nAnd a session cookie is set\n\nGiven I navigate to /login\nWhen I enter invalid credentials\nThen I see \"Invalid email or password\" error\nAnd I remain on the login page\n\nGiven I try to access /admin without a session\nWhen I am redirected to /login\nThen after successful login I am sent back to /admin\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.279746141+08:00","updated_at":"2026-01-04T14:49:02.279746141+08:00","dependencies":[{"issue_id":"skillMatrix-77x","depends_on_id":"skillMatrix-vmo","type":"blocks","created_at":"2026-01-04T14:50:04.230628094+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-77x","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:08.421040084+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-7jw","title":"Task: Badge Token Generation","description":"Create the badge token generation utility using nanoid for secure, URL-safe tokens.\nThese tokens are embedded in QR codes for the public skill viewer.","acceptance_criteria":"```gherkin\nGiven I call generateBadgeToken()\nThen I get a 21-character string\nAnd it contains only URL-safe characters (a-z, A-Z, 0-9, -, _)\nAnd calling it again gives a different value\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.302765557+08:00","updated_at":"2026-01-04T14:49:02.302765557+08:00","dependencies":[{"issue_id":"skillMatrix-7jw","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:39.338647414+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-et6","title":"Task: RBAC Permission System","description":"Implement Role-Based Access Control with a permission system that maps roles to allowed actions.\nThis is critical for security - trainers shouldn't manage users, auditors shouldn't modify data.","acceptance_criteria":"```gherkin\nGiven a user with role \"trainer\"\nWhen checking hasPermission(session, 'certifications:create')\nThen it returns true\n\nGiven a user with role \"trainer\"\nWhen checking hasPermission(session, 'users:manage')\nThen it returns false\n\nGiven a user with role \"auditor\"\nWhen attempting to call createEmployee() Server Action\nThen the action throws PermissionDenied error\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.286508254+08:00","updated_at":"2026-01-04T14:49:02.286508254+08:00","dependencies":[{"issue_id":"skillMatrix-et6","depends_on_id":"skillMatrix-21q","type":"blocks","created_at":"2026-01-04T14:50:14.542873063+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-et6","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:18.619141927+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-f7c","title":"Task: Argon2 Password Hashing","description":"Implement secure password hashing using Argon2id, the winner of the Password Hashing Competition.\nThis ensures even if the database is compromised, passwords remain protected.","acceptance_criteria":"```gherkin\nGiven a plaintext password \"correcthorsebatterystaple\"\nWhen I hash it with hashPassword()\nThen the result starts with \"$argon2id$\"\nAnd verifyPassword(hash, \"correcthorsebatterystaple\") returns true\nAnd verifyPassword(hash, \"wrongpassword\") returns false\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.272371406+08:00","updated_at":"2026-01-04T14:49:02.272371406+08:00","dependencies":[{"issue_id":"skillMatrix-f7c","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:58.221568762+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-khv","title":"Task: Middleware Route Protection","description":"Create middleware to protect admin routes, requiring authentication.\nPublic routes (badge viewer) remain accessible without login.","acceptance_criteria":"```gherkin\nGiven I am not logged in\nWhen I navigate to /admin/employees\nThen I am redirected to /login?callbackUrl=/admin/employees\n\nGiven I am logged in with an active account\nWhen I navigate to /admin/employees\nThen I see the employees page\n\nGiven I am logged in but my account is disabled\nWhen I navigate to /admin/employees\nThen I am redirected to /login?error=disabled\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.282779823+08:00","updated_at":"2026-01-04T14:49:02.282779823+08:00","dependencies":[{"issue_id":"skillMatrix-khv","depends_on_id":"skillMatrix-vmo","type":"blocks","created_at":"2026-01-04T14:50:09.372874645+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-khv","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:13.520080871+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-q1c","title":"Task: Session Context \u0026 Hooks","description":"Create React context and hooks for accessing session data and permissions throughout the app.\nThis provides a clean API for components to check auth state.","acceptance_criteria":"```gherkin\nGiven I am logged in as a trainer\nWhen I call useCurrentUser()\nThen I get { id, email, appRole: 'trainer', employeeId, employeeName }\n\nGiven I am logged in as a trainer\nWhen I call usePermissions()\nThen can('certifications:create') returns true\nAnd can('users:manage') returns false\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.290044247+08:00","updated_at":"2026-01-04T14:49:02.290044247+08:00","dependencies":[{"issue_id":"skillMatrix-q1c","depends_on_id":"skillMatrix-vmo","type":"blocks","created_at":"2026-01-04T14:50:19.716510209+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-q1c","depends_on_id":"skillMatrix-et6","type":"blocks","created_at":"2026-01-04T14:50:24.817254483+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-q1c","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:29.129606512+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-tq3","title":"Task: User Management Page","description":"Create the admin page for managing users: listing, creating, editing, and disabling user accounts.\nAdmin-only access.","acceptance_criteria":"```gherkin\nGiven I am logged in as admin\nWhen I navigate to /admin/users\nThen I see a list of all users\n\nGiven I am logged in as trainer\nWhen I navigate to /admin/users\nThen I see a \"Permission Denied\" message\n\nGiven I create a new user with role \"trainer\"\nWhen the operation completes\nThen the user appears in the list\nAnd they can log in with those credentials\nAnd an audit log entry exists\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.294926003+08:00","updated_at":"2026-01-04T14:49:02.294926003+08:00","dependencies":[{"issue_id":"skillMatrix-tq3","depends_on_id":"skillMatrix-et6","type":"blocks","created_at":"2026-01-04T14:50:29.915245893+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-tq3","depends_on_id":"skillMatrix-21q","type":"blocks","created_at":"2026-01-04T14:50:35.022760076+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-tq3","depends_on_id":"skillMatrix-77x","type":"blocks","created_at":"2026-01-04T14:50:40.127293829+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-tq3","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:52:34.232956338+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4","title":"EPIC: Authentication \u0026 Identity System","description":"Implement the complete authentication and identity management system for Caliber, including:\n- User authentication (email/password)\n- Separation of Users (login) from Employees (business entities)\n- Role-Based Access Control (RBAC)\n- Badge-based identification for floor workers\n- Session management and security","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-04T14:49:02.265845575+08:00","updated_at":"2026-01-04T14:49:38.817493972+08:00","labels":["auth","identity","phase-1","security"]}
{"id":"skillMatrix-vh4.1","title":"QR Code Generation","description":"Implement QR code generation for employee badges. The QR code contains the badge viewer URL and can be downloaded as an image or printed directly.","status":"open","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T14:51:00.45169578+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:00.45169578+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.1","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:00.453143499+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.1","depends_on_id":"skillMatrix-6bu","type":"blocks","created_at":"2026-01-04T14:52:57.032366583+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.2","title":"Badge Token Regeneration","description":"Implement the ability to regenerate an employee's badge token, invalidating their old QR code. Used when a badge is lost, stolen, or needs security rotation.","status":"open","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2026-01-04T14:51:05.844413401+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:05.844413401+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.2","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:05.846343923+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.2","depends_on_id":"skillMatrix-7jw","type":"blocks","created_at":"2026-01-04T14:53:02.138524102+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.2","depends_on_id":"skillMatrix-21q","type":"blocks","created_at":"2026-01-04T14:53:07.25041201+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.3","title":"Quick Certify Scanner Flow","description":"Implement the trainer workflow for certifying employees via badge scan. This is the primary way skills are recorded in the system. Mobile-first, works offline with queue-and-sync.","status":"open","priority":1,"issue_type":"task","estimated_minutes":240,"created_at":"2026-01-04T14:51:11.288722673+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:11.288722673+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.3","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:11.290450698+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.3","depends_on_id":"skillMatrix-6bu","type":"blocks","created_at":"2026-01-04T14:53:12.35812339+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.3","depends_on_id":"skillMatrix-et6","type":"blocks","created_at":"2026-01-04T14:53:17.466060682+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.4","title":"Auth Event Audit Logging","description":"Log all authentication-related events to the audit log for security and compliance. Includes logins, logouts, failed attempts, and permission violations.","status":"open","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2026-01-04T14:51:16.704555592+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:16.704555592+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.4","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:16.705884143+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.4","depends_on_id":"skillMatrix-vmo","type":"blocks","created_at":"2026-01-04T14:53:22.572218661+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.4","depends_on_id":"skillMatrix-21q","type":"blocks","created_at":"2026-01-04T14:53:27.672140143+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.5","title":"Disabled Account Handling","description":"Handle the case where a user's account has been disabled. They should not be able to log in, and active sessions should be invalidated.","status":"open","priority":2,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-04T14:51:30.354010765+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:30.354010765+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.5","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:30.355462181+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.5","depends_on_id":"skillMatrix-77x","type":"blocks","created_at":"2026-01-04T14:53:32.783976492+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.5","depends_on_id":"skillMatrix-khv","type":"blocks","created_at":"2026-01-04T14:53:37.910866092+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.6","title":"Employee-User Linking","description":"Implement the ability to link a user account to an employee record. Allows trainers/managers who are also tracked employees to see their own skills.","status":"open","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T14:51:35.752991615+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:35.752991615+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.6","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:35.754333922+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.6","depends_on_id":"skillMatrix-tq3","type":"blocks","created_at":"2026-01-04T14:53:43.014957418+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vh4.7","title":"Integration Tests for Auth Flow","description":"Create integration tests covering login, session management, route protection, and permission enforcement using Playwright.","status":"open","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-04T14:51:41.131920242+08:00","created_by":"bazzite","updated_at":"2026-01-04T14:51:41.131920242+08:00","dependencies":[{"issue_id":"skillMatrix-vh4.7","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:41.133220319+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.7","depends_on_id":"skillMatrix-77x","type":"blocks","created_at":"2026-01-04T14:53:48.121376777+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.7","depends_on_id":"skillMatrix-khv","type":"blocks","created_at":"2026-01-04T14:53:53.234100073+08:00","created_by":"bazzite"},{"issue_id":"skillMatrix-vh4.7","depends_on_id":"skillMatrix-et6","type":"blocks","created_at":"2026-01-04T14:53:58.341016994+08:00","created_by":"bazzite"}]}
{"id":"skillMatrix-vmo","title":"Task: NextAuth.js Setup \u0026 Configuration","description":"Set up NextAuth.js v5 with the Credentials provider for email/password authentication.\nThis is the foundational auth layer that all other auth features depend on.","acceptance_criteria":"```gherkin\nGiven a properly configured NextAuth setup\nWhen the app starts\nThen the /api/auth endpoints are accessible\nAnd session state can be read with getServerSession()\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:49:02.268898654+08:00","updated_at":"2026-01-04T14:49:02.268898654+08:00","dependencies":[{"issue_id":"skillMatrix-vmo","depends_on_id":"skillMatrix-vh4","type":"parent-child","created_at":"2026-01-04T14:51:53.118800536+08:00","created_by":"bazzite"}]}
